!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).DndAction={})}(this,(function(e){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,d=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return d=e.done,e},e:function(e){s=!0,i=e},f:function(){try{d||null==n.return||n.return()}finally{if(s)throw i}}}}function c(e,t,n){e.dispatchEvent(new CustomEvent("finalize",{detail:{items:t,info:n}}))}function u(e,t,n){e.dispatchEvent(new CustomEvent("consider",{detail:{items:t,info:n}}))}var l="draggedEntered",f="draggedLeft",g="draggedOverIndex",p="draggedLeftDocument",v="leftForAnother",y="outsideOfAny";function m(e,t,n){e.dispatchEvent(new CustomEvent(l,{detail:{indexObj:t,draggedEl:n}}))}function h(e,t,n){e.dispatchEvent(new CustomEvent(f,{detail:{draggedEl:t,type:v,theOtherDz:n}}))}function b(e,t){e.dispatchEvent(new CustomEvent(f,{detail:{draggedEl:t,type:y}}))}function w(e,t,n){e.dispatchEvent(new CustomEvent(g,{detail:{indexObj:t,draggedEl:n}}))}function E(e){window.dispatchEvent(new CustomEvent(p,{detail:{draggedEl:e}}))}var D={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:l,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:g,DRAGGED_LEFT:f,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},O={POINTER:"pointer",KEYBOARD:"keyboard"},T="isDndShadowItem",x="data-is-dnd-shadow-item",A="id:dnd-shadow-placeholder-0000",R="dnd-action-dragged-el",S="id",I=0;function P(){I++}function _(){if(0===I)throw new Error("Bug! trying to decrement when there are no dropzones");I--}var L,N="undefined"==typeof window,C=function(){};function k(e){var t,n=e.getBoundingClientRect(),r=getComputedStyle(e),o=r.transform;if(o){var i,a,d,s;if(o.startsWith("matrix3d("))i=+(t=o.slice(9,-1).split(/, /))[0],a=+t[5],d=+t[12],s=+t[13];else{if(!o.startsWith("matrix("))return n;i=+(t=o.slice(7,-1).split(/, /))[0],a=+t[3],d=+t[4],s=+t[5]}var c=r.transformOrigin,u=n.x-d-(1-i)*parseFloat(c),l=n.y-s-(1-a)*parseFloat(c.slice(c.indexOf(" ")+1)),f=i?n.width/i:e.offsetWidth,g=a?n.height/a:e.offsetHeight;return{x:u,y:l,width:f,height:g,top:l,right:u+f,bottom:l+g,left:u}}return n}function M(e){var t=k(e);return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function j(e){var t=e.getBoundingClientRect();return{top:t.top+window.scrollY,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX,right:t.right+window.scrollX}}function z(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function F(e,t){return e.y<=t.bottom&&e.y>=t.top&&e.x>=t.left&&e.x<=t.right}function G(e){return z(j(e))}function B(e,t){return F(G(e),M(t))}function W(e,t){var n,r;return n=G(e),r=G(t),Math.sqrt(Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2))}function Y(){C((function(){return"resetting indexes cache"})),L=new Map}function H(e){C((function(){return"resetting indexes cache for dz"})),L.delete(e)}function Z(e,t){if(!B(e,t))return null;var n=t.children;if(0===n.length)return{index:0,isProximityBased:!0};for(var r=function(e){var t=Array.from(e.children).findIndex((function(e){return e.getAttribute(x)}));if(t>=0)return L.has(e)||L.set(e,new Map),L.get(e).set(t,M(e.children[t])),t}(t),o=0;o<n.length;o++)if(B(e,n[o])){var i=L.has(t)&&L.get(t).get(o);return i&&!F(G(e),i)?{index:r,isProximityBased:!1}:{index:o,isProximityBased:!1}}for(var a=Number.MAX_VALUE,d=void 0,s=0;s<n.length;s++){var c=W(e,n[s]);c<a&&(a=c,d=s)}return{index:d,isProximityBased:!0}}function X(){var e;function t(){e={directionObj:void 0,stepPx:0}}function n(t){var r=e,o=r.directionObj,i=r.stepPx;o&&(t.scrollBy(o.x*i,o.y*i),window.requestAnimationFrame((function(){return n(t)})))}function r(e){return 25-e}return t(),{scrollIfNeeded:function(o,i){if(!i)return!1;var a,d,s=F(a=o,d=j(i))?{top:a.y-d.top,bottom:d.bottom-a.y,left:a.x-d.left,right:Math.min(d.right,document.documentElement.clientWidth)-a.x}:null;if(null===s)return t(),!1;var c=!!e.directionObj,u=!1,l=!1;return i.scrollHeight>i.clientHeight&&(s.bottom<25?(u=!0,e.directionObj={x:0,y:1},e.stepPx=r(s.bottom)):s.top<25&&(u=!0,e.directionObj={x:0,y:-1},e.stepPx=r(s.top)),!c&&u)||i.scrollWidth>i.clientWidth&&(s.right<25?(l=!0,e.directionObj={x:1,y:0},e.stepPx=r(s.right)):s.left<25&&(l=!0,e.directionObj={x:-1,y:0},e.stepPx=r(s.left)),!c&&l)?(n(i),!0):(t(),!1)},resetScrolling:t}}function K(e){return JSON.stringify(e,null,2)}function U(e){if(!e)throw new Error("cannot get depth of a falsy node");return V(e,0)}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.parentElement?V(e.parentElement,t+1):t-1}Y();var q,J,$=X(),Q=$.scrollIfNeeded,ee=$.resetScrolling;function te(e){var t=e.touches?e.touches[0]:e;J={x:t.clientX,y:t.clientY}}var ne,re=X(),oe=re.scrollIfNeeded,ie=re.resetScrolling;function ae(){J&&oe(J,document.documentElement)&&Y(),ne=window.setTimeout(ae,300)}function de(e){return"".concat(e," ").concat(.2,"s ease")}function se(e,t){var n=window.getComputedStyle(e);Array.from(n).filter((function(e){return e.startsWith("background")||e.startsWith("padding")||e.startsWith("font")||e.startsWith("text")||e.startsWith("align")||e.startsWith("justify")||e.startsWith("display")||e.startsWith("flex")||e.startsWith("border")||"opacity"===e||"color"===e||"list-style-type"===e})).forEach((function(e){return t.style.setProperty(e,n.getPropertyValue(e),n.getPropertyPriority(e))}))}function ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return[]};e.forEach((function(e){var r=t(e);Object.keys(r).forEach((function(t){e.style[t]=r[t]})),n(e).forEach((function(t){return e.classList.add(t)}))}))}function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return[]};e.forEach((function(e){var r=t(e);Object.keys(r).forEach((function(t){e.style[t]=""})),n(e).forEach((function(t){return e.classList.contains(t)&&e.classList.remove(t)}))}))}var le,fe,ge,pe,ve,ye,me,he,be,we,Ee,De,Oe=100,Te={outline:"rgba(255, 255, 102, 0.7) solid 2px"},xe=!1,Ae=!1,Re=!1,Se=new Map,Ie=new Map,Pe=new WeakMap;function _e(e,t){Se.get(t).delete(e),_(),0===Se.get(t).size&&Se.delete(t)}function Le(){C((function(){return"watching dragged element"})),C((function(){return"arming window scroller"})),window.addEventListener("mousemove",te),window.addEventListener("touchmove",te),ae();var e,t=Se.get(pe),n=s(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.addEventListener(l,Ce),r.addEventListener(f,ke),r.addEventListener(g,Me)}}catch(e){n.e(e)}finally{n.f()}window.addEventListener(p,ze);var o=Math.max.apply(Math,[Oe].concat(i(Array.from(t.keys()).map((function(e){return Ie.get(e).dropAnimationDurationMs})))));!function(e,t){var n,r,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,a=!1,d=Array.from(t).sort((function(e,t){return U(t)-U(e)}));!function t(){var c=G(e),u=Q(c,n);if(!u&&o&&Math.abs(o.x-c.x)<10&&Math.abs(o.y-c.y)<10)q=window.setTimeout(t,i);else{if(function(e){var t=j(e);return t.right<0||t.left>document.documentElement.scrollWidth||t.bottom<0||t.top>document.documentElement.scrollHeight}(e))return C((function(){return"off document"})),void E(e);o=c;var l,f=!1,g=s(d);try{for(g.s();!(l=g.n()).done;){var p=l.value;u&&H(n);var v=Z(e,p);if(null!==v){var y=v.index;f=!0,p!==n?(n&&h(n,e,p),m(p,v,e),n=p):y!==r&&(w(p,v,e),r=y);break}}}catch(e){g.e(e)}finally{g.f()}!f&&a&&n?(b(n,e),n=void 0,r=void 0,a=!1):a=!0,q=window.setTimeout(t,i)}}()}(fe,t,1.07*o)}function Ne(e){return e.findIndex((function(e){return!!e.isDndShadowItem&&e[S]!==A}))}function Ce(e){C((function(){return["dragged entered",e.currentTarget,e.detail]}));var t=Ie.get(e.currentTarget),n=t.items;if(t.dropFromOthersDisabled&&e.currentTarget!==ve)C((function(){return"ignoring dragged entered because drop is currently disabled"}));else{if(Re=!1,n=n.filter((function(e){return e[S]!==me[S]})),C((function(){return"dragged entered items ".concat(K(n))})),ve!==e.currentTarget){var r=Ie.get(ve).items.filter((function(e){return!e.isDndShadowItem}));u(ve,r,{trigger:D.DRAGGED_ENTERED_ANOTHER,id:ge[S],source:O.POINTER})}else{var o=function(e){return e.findIndex((function(e){return e[S]===A}))}(n);-1!==o&&(C((function(){return"removing placeholder item from origin dz"})),n.splice(o,1))}var i=e.detail.indexObj,a=i.index,d=i.isProximityBased&&a===e.currentTarget.children.length-1?a+1:a;he=e.currentTarget,n.splice(d,0,me),u(e.currentTarget,n,{trigger:D.DRAGGED_ENTERED,id:ge[S],source:O.POINTER})}}function ke(e){if(xe){C((function(){return["dragged left",e.currentTarget,e.detail]}));var t=Ie.get(e.currentTarget),n=t.items;if(t.dropFromOthersDisabled&&e.currentTarget!==ve&&e.currentTarget!==he)C((function(){return"drop is currently disabled"}));else{var r=Ne(n),o=n.splice(r,1)[0];he=void 0;var i=e.detail,a=i.type,d=i.theOtherDz;if(a===y||a===v&&d!==ve&&Ie.get(d).dropFromOthersDisabled){C((function(){return"dragged left all, putting shadow element back in the origin dz"})),Re=!0,he=ve;var s=Ie.get(ve).items;s.splice(ye,0,o),u(ve,s,{trigger:D.DRAGGED_LEFT_ALL,id:ge[S],source:O.POINTER})}u(e.currentTarget,n,{trigger:D.DRAGGED_LEFT,id:ge[S],source:O.POINTER})}}}function Me(e){C((function(){return["dragged is over index",e.currentTarget,e.detail]}));var t=Ie.get(e.currentTarget),n=t.items;if(t.dropFromOthersDisabled&&e.currentTarget!==ve)C((function(){return"drop is currently disabled"}));else{Re=!1;var r=e.detail.indexObj.index,o=Ne(n);n.splice(o,1),n.splice(r,0,me),u(e.currentTarget,n,{trigger:D.DRAGGED_OVER_INDEX,id:ge[S],source:O.POINTER})}}function je(e){e.preventDefault();var t=e.touches?e.touches[0]:e;we={x:t.clientX,y:t.clientY},fe.style.transform="translate3d(".concat(we.x-be.x,"px, ").concat(we.y-be.y,"px, 0)")}function ze(){C((function(){return"dropped"})),Ae=!0,window.removeEventListener("mousemove",je),window.removeEventListener("touchmove",je),window.removeEventListener("mouseup",ze),window.removeEventListener("touchend",ze),function(){C((function(){return"unwatching dragged element"})),C((function(){return"disarming window scroller"})),window.removeEventListener("mousemove",te),window.removeEventListener("touchmove",te),J=void 0,window.clearTimeout(ne),ie();var e,t=s(Se.get(pe));try{for(t.s();!(e=t.n()).done;){var n=e.value;n.removeEventListener(l,Ce),n.removeEventListener(f,ke),n.removeEventListener(g,Me)}}catch(e){t.e(e)}finally{t.f()}window.removeEventListener(p,ze),C((function(){return"unobserving"})),clearTimeout(q),ee(),Y()}(),function(e){e.style.cursor="grab"}(fe),he||(C((function(){return"element was dropped right after it left origin but before entering somewhere else"})),he=ve),C((function(){return["dropped in dz",he]}));var e=Ie.get(he),t=e.items,n=e.type;ue(Se.get(n),(function(e){return Ie.get(e).dropTargetStyle}),(function(e){return Ie.get(e).dropTargetClasses}));var r=Ne(t);-1===r&&(r=ye),t=t.map((function(e){return e.isDndShadowItem?ge:e})),function(e,t){var n=k(he.children[e]),r={x:n.left-parseFloat(fe.style.left),y:n.top-parseFloat(fe.style.top)},o=Ie.get(he).dropAnimationDurationMs,i="transform ".concat(o,"ms ease");fe.style.transition=fe.style.transition?fe.style.transition+","+i:i,fe.style.transform="translate3d(".concat(r.x,"px, ").concat(r.y,"px, 0)"),window.setTimeout(t,o)}(r,(function(){var e;Ee(),c(he,t,{trigger:Re?D.DROPPED_OUTSIDE_OF_ANY:D.DROPPED_INTO_ZONE,id:ge[S],source:O.POINTER}),he!==ve&&c(ve,Ie.get(ve).items,{trigger:D.DROPPED_INTO_ANOTHER,id:ge[S],source:O.POINTER}),(e=he.children[r]).style.visibility="",e.removeAttribute(x),fe.remove(),le.remove(),fe=void 0,le=void 0,ge=void 0,pe=void 0,ve=void 0,ye=void 0,me=void 0,he=void 0,be=void 0,we=void 0,xe=!1,Ae=!1,Ee=void 0,Re=!1}))}function Fe(e,t){var r={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Te,dropTargetClasses:[],transformDraggedElement:function(){},centreDraggedOnCursor:!1};C((function(){return["dndzone good to go options: ".concat(K(t),", config: ").concat(K(r)),{node:e}]}));var a=new Map;function d(){window.removeEventListener("mousemove",c),window.removeEventListener("touchmove",c),window.removeEventListener("mouseup",s),window.removeEventListener("touchend",s)}function s(){d(),le=void 0,be=void 0,we=void 0}function c(e){e.preventDefault();var t=e.touches?e.touches[0]:e;we={x:t.clientX,y:t.clientY},(Math.abs(we.x-be.x)>=3||Math.abs(we.y-be.y)>=3)&&(d(),function(){C((function(){return["drag start config: ".concat(K(r)),le]})),xe=!0;var e=a.get(le);ye=e;var t=(ve=le.parentElement).getRootNode(),i=t.body||t,d=r.items,s=r.type,c=r.centreDraggedOnCursor;ge=o({},d[e]),pe=s,me=o(o({},ge),{},n({},T,!0));var l=o(o({},me),{},n({},S,A));fe=function(e,t){var n=e.getBoundingClientRect(),r=e.cloneNode(!0);se(e,r),r.id=R,r.style.position="fixed";var o=n.top,i=n.left;if(r.style.top="".concat(o,"px"),r.style.left="".concat(i,"px"),t){var a=z(n);o-=a.y-t.y,i-=a.x-t.x,window.setTimeout((function(){r.style.top="".concat(o,"px"),r.style.left="".concat(i,"px")}),0)}return r.style.margin="0",r.style.boxSizing="border-box",r.style.height="".concat(n.height,"px"),r.style.width="".concat(n.width,"px"),r.style.transition="".concat(de("top"),", ").concat(de("left"),", ").concat(de("background-color"),", ").concat(de("opacity"),", ").concat(de("color")," "),window.setTimeout((function(){return r.style.transition+=", ".concat(de("width"),", ").concat(de("height"))}),0),r.style.zIndex="9999",r.style.cursor="grabbing",r}(le,c&&we),window.requestAnimationFrame((function e(){var t;fe.parentElement?window.requestAnimationFrame(e):(i.appendChild(fe),fe.focus(),Le(),(t=le).style.display="none",t.style.position="fixed",t.style.zIndex="-5",i.appendChild(le))})),ce(Array.from(Se.get(r.type)).filter((function(e){return e===ve||!Ie.get(e).dropFromOthersDisabled})),(function(e){return Ie.get(e).dropTargetStyle}),(function(e){return Ie.get(e).dropTargetClasses})),d.splice(e,1,l),Ee=function(e){var t=e.style.minHeight;e.style.minHeight=window.getComputedStyle(e).getPropertyValue("height");var n=e.style.minWidth;return e.style.minWidth=window.getComputedStyle(e).getPropertyValue("width"),function(){e.style.minHeight=t,e.style.minWidth=n}}(ve),u(ve,d,{trigger:D.DRAG_STARTED,id:ge[S],source:O.POINTER}),window.addEventListener("mousemove",je,{passive:!1}),window.addEventListener("touchmove",je,{passive:!1,capture:!1}),window.addEventListener("mouseup",ze,{passive:!1}),window.addEventListener("touchend",ze,{passive:!1})}())}function l(e){if(e.target===e.currentTarget||void 0===e.target.value&&!e.target.isContentEditable)if(e.button)C((function(){return"ignoring none left click button: ".concat(e.button)}));else if(xe)C((function(){return"cannot start a new drag before finalizing previous one"}));else{e.stopPropagation();var t=e.touches?e.touches[0]:e;be={x:t.clientX,y:t.clientY},we=o({},be),le=e.currentTarget,window.addEventListener("mousemove",c,{passive:!1}),window.addEventListener("touchmove",c,{passive:!1,capture:!1}),window.addEventListener("mouseup",s,{passive:!1}),window.addEventListener("touchend",s,{passive:!1})}else C((function(){return"won't initiate drag on a nested input element"}))}function f(t){var n,o,d=t.items,s=void 0===d?void 0:d,c=t.flipDurationMs,u=void 0===c?0:c,f=t.type,g=void 0===f?"--any--":f,p=t.dragDisabled,v=void 0!==p&&p,y=t.morphDisabled,m=void 0!==y&&y,h=t.dropFromOthersDisabled,b=void 0!==h&&h,w=t.dropTargetStyle,E=void 0===w?Te:w,D=t.dropTargetClasses,O=void 0===D?[]:D,T=t.transformDraggedElement,A=void 0===T?function(){}:T,R=t.centreDraggedOnCursor,S=void 0!==R&&R;function I(e,t){return Ie.get(e)?Ie.get(e)[t]:r[t]}r.dropAnimationDurationMs=u,r.type&&g!==r.type&&_e(e,r.type),r.type=g,n=e,o=g,C((function(){return"registering drop-zone if absent"})),Se.has(o)||Se.set(o,new Set),Se.get(o).has(n)||(Se.get(o).add(n),P()),r.items=i(s),r.dragDisabled=v,r.morphDisabled=m,r.transformDraggedElement=A,r.centreDraggedOnCursor=S,!xe||Ae||function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!{}.hasOwnProperty.call(t,n)||t[n]!==e[n])return!1;return!0}(E,r.dropTargetStyle)&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(O,r.dropTargetClasses)||(ue([e],(function(){return r.dropTargetStyle}),(function(){return O})),ce([e],(function(){return E}),(function(){return O}))),r.dropTargetStyle=E,r.dropTargetClasses=i(O),xe&&r.dropFromOthersDisabled!==b&&(b?ue([e],(function(e){return I(e,"dropTargetStyle")}),(function(e){return I(e,"dropTargetClasses")})):ce([e],(function(e){return I(e,"dropTargetStyle")}),(function(e){return I(e,"dropTargetClasses")}))),r.dropFromOthersDisabled=b,Ie.set(e,r);for(var _=Ne(r.items),L=function(t){var n,o=e.children[t];if(function(e,t){e.draggable=!1,e.ondragstart=function(){return!1},t?(e.style.userSelect="",e.style.WebkitUserSelect="",e.style.cursor=""):(e.style.userSelect="none",e.style.WebkitUserSelect="none",e.style.cursor="grab")}(o,v),t===_)return m||function(e,t,n,r,o){var i=t.getBoundingClientRect(),a=e.getBoundingClientRect(),d=i.width-a.width,s=i.height-a.height;if(d||s){var c={left:(n-a.left)/a.width,top:(r-a.top)/a.height};e.style.height="".concat(i.height,"px"),e.style.width="".concat(i.width,"px"),e.style.left="".concat(parseFloat(e.style.left)-c.left*d,"px"),e.style.top="".concat(parseFloat(e.style.top)-c.top*s,"px")}se(t,e),o()}(fe,o,we.x,we.y,(function(){return r.transformDraggedElement(fe,ge,t)})),(n=o).style.visibility="hidden",n.setAttribute(x,"true"),"continue";o.removeEventListener("mousedown",Pe.get(o)),o.removeEventListener("touchstart",Pe.get(o)),v||(o.addEventListener("mousedown",l),o.addEventListener("touchstart",l),Pe.set(o,l)),a.set(o,t)},N=0;N<e.children.length;N++)L(N)}return f(t),{update:function(e){C((function(){return"pointer dndzone will update newOptions: ".concat(K(e))})),f(e)},destroy:function(){C((function(){return"pointer dndzone will destroy"})),_e(e,r.type),Ie.delete(e)}}}var Ge,Be={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},We=(n(De={},Be.DND_ZONE_ACTIVE,"Tab to one the items and press space-bar or enter to start dragging it"),n(De,Be.DND_ZONE_DRAG_DISABLED,"This is a disabled drag and drop list"),De);function Ye(){(Ge=document.createElement("div")).id="dnd-action-aria-alert",Ge.style.position="fixed",Ge.style.bottom="0",Ge.style.left="0",Ge.style.zIndex="-5",Ge.style.opacity="0",Ge.style.height="0",Ge.style.width="0",Ge.setAttribute("role","alert"),document.body.prepend(Ge),Object.entries(We).forEach((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,d=e[Symbol.iterator]();!(r=(a=d.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==d.return||d.return()}finally{if(o)throw i}}return n}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=t[0],r=t[1];return document.body.prepend(function(e,t){var n=document.createElement("div");return n.id=e,n.innerHTML="<p>".concat(t,"</p>"),n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}(n,r))}))}function He(e){Ge.innerHTML="";var t=document.createTextNode(e);Ge.appendChild(t),Ge.style.display="none",Ge.style.display="inline"}var Ze,Xe,Ke,Ue,Ve={outline:"rgba(255, 255, 102, 0.7) solid 2px"},qe=!1,Je="",$e="",Qe=new WeakSet,et=new WeakMap,tt=new WeakMap,nt=new Map,rt=new Map,ot=new Map,it=N?null:("complete"===document.readyState?Ye():window.addEventListener("DOMContentLoaded",Ye),o({},Be));function at(e,t){C((function(){return"unregistering drop-zone"})),Xe===e&&lt(),ot.get(t).delete(e),_(),0===ot.get(t).size&&ot.delete(t),0===ot.size&&(C((function(){return"removing global keydown and click handlers"})),window.removeEventListener("keydown",dt),window.removeEventListener("click",st))}function dt(e){qe&&"Escape"===e.key&&lt()}function st(){qe&&(Qe.has(document.activeElement)||(C((function(){return"clicked outside of any draggable"})),lt()))}function ct(e){if(C((function(){return"zone focus"})),qe){var t=e.currentTarget;if(t!==Xe){Je=t.getAttribute("aria-label")||"";var n=rt.get(Xe).items,r=n.find((function(e){return e[S]===Ue})),o=n.indexOf(r),i=n.splice(o,1)[0],a=rt.get(t),d=a.items,s=a.autoAriaDisabled;t.getBoundingClientRect().top<Xe.getBoundingClientRect().top||t.getBoundingClientRect().left<Xe.getBoundingClientRect().left?(d.push(i),s||He("Moved item ".concat($e," to the end of the list ").concat(Je))):(d.unshift(i),s||He("Moved item ".concat($e," to the beginning of the list ").concat(Je))),c(Xe,n,{trigger:D.DROPPED_INTO_ANOTHER,id:Ue,source:O.KEYBOARD}),c(t,d,{trigger:D.DROPPED_INTO_ZONE,id:Ue,source:O.KEYBOARD}),Xe=t}}}function ut(){nt.forEach((function(e,t){return(0,e.update)(rt.get(t))}))}function lt(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];C((function(){return"drop"})),rt.get(Xe).autoAriaDisabled||He("Stopped dragging item ".concat($e)),Qe.has(document.activeElement)&&document.activeElement.blur(),e&&u(Xe,rt.get(Xe).items,{trigger:D.DRAG_STOPPED,id:Ue,source:O.KEYBOARD}),ue(ot.get(Ze),(function(e){return rt.get(e).dropTargetStyle}),(function(e){return rt.get(e).dropTargetClasses})),Ke=null,Ue=null,$e="",Ze=null,Xe=null,Je="",qe=!1,ut()}function ft(e){var n=e.items,r=(e.flipDurationMs,e.type,e.dragDisabled,e.morphDisabled,e.dropFromOthersDisabled,e.zoneTabIndex),o=(e.dropTargetStyle,e.dropTargetClasses),i=(e.transformDraggedElement,e.autoAriaDisabled,e.centreDraggedOnCursor,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["items","flipDurationMs","type","dragDisabled","morphDisabled","dropFromOthersDisabled","zoneTabIndex","dropTargetStyle","dropTargetClasses","transformDraggedElement","autoAriaDisabled","centreDraggedOnCursor"]));if(Object.keys(i).length,!n)throw new Error("no 'items' key provided to dndzone");var a,d,s=n.find((function(e){return!{}.hasOwnProperty.call(e,S)}));if(s)throw new Error("missing '".concat(S,"' property for item ").concat(K(s)));if(o&&!Array.isArray(o))throw new Error("dropTargetClasses should be an array but instead it is a ".concat(t(o),", ").concat(K(o)));if(r&&(a=r,isNaN(a)||(0|(d=parseFloat(a)))!==d))throw new Error("zoneTabIndex should be a number but instead it is a ".concat(t(r),", ").concat(K(r)))}e.DRAGGED_ELEMENT_ID=R,e.SHADOW_ITEM_MARKER_PROPERTY_NAME=T,e.SHADOW_PLACEHOLDER_ITEM_ID=A,e.SOURCES=O,e.TRIGGERS=D,e.alertToScreenReader=He,e.dndzone=function(e,t){ft(t);var n=Fe(e,t),r=function(e,t){var n={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:Ve,dropTargetClasses:[],autoAriaDisabled:!1};function r(e,t,n){e.length<=1||e.splice(n,1,e.splice(t,1,e[n])[0])}function o(t){switch(C((function(){return["handling key down",t.key]})),t.key){case"Enter":case" ":if((void 0!==t.target.disabled||t.target.href||t.target.isContentEditable)&&!Qe.has(t.target))return;t.preventDefault(),t.stopPropagation(),qe?lt():a(t);break;case"ArrowDown":case"ArrowRight":if(!qe)return;t.preventDefault(),t.stopPropagation();var o=rt.get(e).items,i=Array.from(e.children),d=i.indexOf(t.currentTarget);C((function(){return["arrow down",d]})),d<i.length-1&&(n.autoAriaDisabled||He("Moved item ".concat($e," to position ").concat(d+2," in the list ").concat(Je)),r(o,d,d+1),c(e,o,{trigger:D.DROPPED_INTO_ZONE,id:Ue,source:O.KEYBOARD}));break;case"ArrowUp":case"ArrowLeft":if(!qe)return;t.preventDefault(),t.stopPropagation();var s=rt.get(e).items,u=Array.from(e.children).indexOf(t.currentTarget);C((function(){return["arrow up",u]})),u>0&&(n.autoAriaDisabled||He("Moved item ".concat($e," to position ").concat(u," in the list ").concat(Je)),r(s,u,u-1),c(e,s,{trigger:D.DROPPED_INTO_ZONE,id:Ue,source:O.KEYBOARD}))}}function a(t){var r,o,i,a;C((function(){return"drag start"})),r=t.currentTarget,o=rt.get(e).items,a=(i=Array.from(e.children)).indexOf(r),(Ke=r).tabIndex=0,Ue=o[a][S],$e=i[a].getAttribute("aria-label")||"",Xe=e,Ze=n.type,qe=!0;var d=Array.from(ot.get(n.type)).filter((function(e){return e===Xe||!rt.get(e).dropFromOthersDisabled}));if(ce(d,(function(e){return rt.get(e).dropTargetStyle}),(function(e){return rt.get(e).dropTargetClasses})),!n.autoAriaDisabled){var s="Started dragging item ".concat($e,". Use the arrow keys to move it within its list ").concat(Je);d.length>1&&(s+=", or tab to another list in order to move the item into it"),He(s)}u(e,rt.get(e).items,{trigger:D.DRAG_STARTED,id:Ue,source:O.KEYBOARD}),ut()}function d(e){qe&&e.currentTarget!==Ke&&(e.stopPropagation(),lt(!1),a(e))}function s(t){var r,a,s=t.items,c=void 0===s?[]:s,u=t.type,l=void 0===u?"--any--":u,f=t.dragDisabled,g=void 0!==f&&f,p=t.zoneTabIndex,v=void 0===p?0:p,y=t.dropFromOthersDisabled,m=void 0!==y&&y,h=t.dropTargetStyle,b=void 0===h?Ve:h,w=t.dropTargetClasses,E=void 0===w?[]:w,D=t.autoAriaDisabled,O=void 0!==D&&D;n.items=i(c),n.dragDisabled=g,n.dropFromOthersDisabled=m,n.zoneTabIndex=v,n.dropTargetStyle=b,n.dropTargetClasses=E,n.autoAriaDisabled=O,O||(e.setAttribute("aria-disabled",g),e.setAttribute("role","list"),e.setAttribute("aria-describedby",g?it.DND_ZONE_DRAG_DISABLED:it.DND_ZONE_ACTIVE)),n.type&&l!==n.type&&at(e,n.type),n.type=l,r=e,a=l,C((function(){return"registering drop-zone if absent"})),0===ot.size&&(C((function(){return"adding global keydown and click handlers"})),window.addEventListener("keydown",dt),window.addEventListener("click",st)),ot.has(a)||ot.set(a,new Set),ot.get(a).has(r)||(ot.get(a).add(r),P()),rt.set(e,n),e.tabIndex=qe?e===Xe||Ke.contains(e)||n.dropFromOthersDisabled||Xe&&n.type!==rt.get(Xe).type?-1:0:n.zoneTabIndex,e.addEventListener("focus",ct);for(var T=function(t){var r=e.children[t];Qe.add(r),r.tabIndex=qe?-1:0,O||r.setAttribute("role","listitem"),r.removeEventListener("keydown",et.get(r)),r.removeEventListener("click",tt.get(r)),g||(r.addEventListener("keydown",o),et.set(r,o),r.addEventListener("click",d),tt.set(r,d)),qe&&n.items[t][S]===Ue&&(C((function(){return["focusing on",{i:t,focusedItemId:Ue}]})),(Ke=r).tabIndex=0,r.focus())},x=0;x<e.children.length;x++)T(x)}s(t);var l={update:function(e){C((function(){return"keyboard dndzone will update newOptions: ".concat(K(e))})),s(e)},destroy:function(){C((function(){return"keyboard dndzone will destroy"})),at(e,n.type),rt.delete(e),nt.delete(e)}};return nt.set(e,l),l}(e,t);return{update:function(e){ft(e),n.update(e),r.update(e)},destroy:function(){n.destroy(),r.destroy()}}},e.overrideItemIdKeyNameBeforeInitialisingDndZones=function(e){if(I>0)throw new Error("can only override the id key before initialising any dndzone");if("string"!=typeof e)throw new Error("item id key has to be a string");C((function(){return["overriding item id key name",e]})),S=e},e.setDebugMode=function(e){C=e?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.debug,n=e();Array.isArray(n)?t.apply(void 0,i(n)):t(n)}:function(){}},Object.defineProperty(e,"__esModule",{value:!0})}));